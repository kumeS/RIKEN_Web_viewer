$(function(){$("#stick-pin__add-point").on("mousedown",function(){});var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e=0,n=void 0,t=!1;pinDownX=void 0,pinDownY=void 0;var a=!1,i=void 0;$('#stick-pin__delete-all__confirm input[value="Yes"]').on("mousedown",function(){$(".waypoint-pin.show").remove(),$(".pinned-list").remove(),$(".stick-pin-operation-button").removeClass("add"),$(".stick-pin-pins").removeClass("on"),$(".distance-table-add").remove(),$("#distance-table").hide(),e=0}),$("#stick-pin__hide-all").on("mousedown",function(){"Hide all"===$(this).val()?$(".waypoint-pin.show").hide():$(".waypoint-pin.show").show()}),$("#stick-pin__add-point").on("mousedown",function(){$(this).hasClass("on")?$("#waypoint-area").css("pointer-events","none"):$("#waypoint-area").css("pointer-events","auto")});var s=0,p=void 0,l=void 0,c=void 0,d=void 0,r=void 0,f=void 0;$("#waypoint-area").on("mousedown",function(a){if($("#stick-pin__add-point").hasClass("on")&&e<o.length){if(areaTranslate=$("#waypoint-area").css("transform"),areaTranslateX="none"===areaTranslate?0:areaTranslate.split(", ")[4],areaTranslateY="none"===areaTranslate?0:areaTranslate.split(", ")[5].slice(0,-1),n=o.charAt(e),$(".waypoint-pin.origin").clone().appendTo("#waypoint-area").removeClass("origin").addClass("clone move pinCode"+n).show(),$(".waypoint-pin.circle.clone").css({left:a.pageX-8-areaTranslateX+"px",top:a.pageY-8-16-areaTranslateY+"px"}),$(".waypoint-pin.pin.clone").css({left:a.pageX-8-areaTranslateX+"px",top:a.pageY-16-areaTranslateY+"px"}),$(".waypoint-pin.circle.clone").text(n),t=!0,pinDownX=a.pageX-$(".waypoint-pin.circle.clone").offset().left,circleDownY=a.pageY-$(".waypoint-pin.circle.clone").offset().top,pinDownY=a.pageY-$(".waypoint-pin.circle.clone").offset().top,$(".pinned-list").removeClass("on"),$('<li class="pinned-list on">'+n+": </li>").appendTo("#pinned-list-ul"),$(".pinned-list").off("mousedown").on("mousedown",function(){$(this).hasClass("on")?$(this).removeClass("on"):($(".pinned-list").removeClass("on"),$(this).addClass("on"))}),e>0){for($("#distance-table").show(),$('<td class="distance-table-add">'+n+"</td>").appendTo("#distance-table-tr0"),s=0;e>s;s++)$('<td class="distance-table-add"></td>').appendTo("#distance-table-tr"+o.charAt(s));for($('<tr id="distance-table-tr'+n+'" class="distance-table-add"><td>'+n+"</td></tr>").appendTo("#distance-table-tbody"),s=0;e>=s;s++)$("<td></td>").appendTo("#distance-table-tr"+n);for(s=0;e>s;s++)d=o.charAt(s),r=$(".pinCode"+d).offset(),f=$(".pinCode"+o.charAt(e)).offset(),l=r.left-f.left,c=r.top-f.top,p=Math.floor(Math.sqrt(Math.pow(l,2)+Math.pow(c,2))),$("#distance-table-tr"+d).children("td:eq("+(e+1)+")").text(p);var i=void 0;$("#distance-table-tbody").find("td").off("mouseover").on("mouseover",function(){$(this).parent("tr").find("td").addClass("hover"),i=$(this).parent("tr").find("td").index(this),$("#distance-table-tbody").find("tr").each(function(){$(this).find("td:eq("+i+")").addClass("hover")})}),$("#distance-table-tbody").find("td").off("mouseout").on("mouseout",function(){$("#distance-table-tbody").find("td.hover").removeClass("hover")})}0===e&&$(".stick-pin-operation-button").addClass("add"),e++,$(".waypoint-pin.clone").on({mouseenter:function(o){t||$("#stick-pin__move-point").hasClass("on")&&($(this).clone().appendTo("#waypoint-area").addClass("copy").show(),$(this).addClass("move"),$(this).hasClass("circle")?($(this).next(".pin").clone().appendTo("#waypoint-area").removeClass("origin").addClass("copy").show(),$(this).next(".pin").addClass("move"),$(".waypoint-pin.circle.copy").css({left:$(this).offset().left,top:$(this).offset().top}),$(".waypoint-pin.pin.copy").css({left:$(this).next(".pin").offset().left,top:$(this).next(".pin").offset().top})):($(this).prev(".circle").clone().appendTo("#waypoint-area").removeClass("origin").addClass("copy").show(),$(this).prev(".circle").addClass("move"),$(".waypoint-pin.circle.copy").css({left:$(this).prev(".circle").offset().left,top:$(this).prev(".circle").offset().top}),$(".waypoint-pin.pin.copy").css({left:$(this).offset().left,top:$(this).offset().top})),$(".waypoint-pin.copy").css("opacity","0"),$("#waypoint-area").css("pointer-events","auto"),$(".waypoint-pin.copy").on({mouseleave:function(){$(".waypoint-pin.copy").off("mousedown mouseleave"),$(".waypoint-pin.copy").remove(),$("#waypoint-area").css("pointer-events","none"),$(".waypoint-pin.move").removeClass("move")},mousedown:function(o){$("#stick-pin__move-point").hasClass("on")&&($(".waypoint-pin.copy").remove(),t=!0,pinDownX=o.pageX-$(".waypoint-pin.circle.move").offset().left,circleDownY=o.pageY-$(".waypoint-pin.circle.move").offset().top,pinDownY=o.pageY-$(".waypoint-pin.circle.move").offset().top)}}),$(window).on({"mouseup.copy":function(){if($(window).off("mouseup.copy"),$(".waypoint-pin.move").removeClass("move"),$(".waypoint-pin.copy").off("mousedown mouseleave"),$("#waypoint-area").css("pointer-events","none"),e>1)for(s=0;e>s;s++);}}))}}),$(window).on("mouseup",function(){t&&(t=!1,$(".waypoint-pin.move").removeClass("move"))}),$(window).on("mousemove",function(o){t&&($(".waypoint-pin.circle.move").css({left:o.pageX-pinDownX-areaTranslateX+"px",top:o.pageY-circleDownY-areaTranslateY+"px"}),$(".waypoint-pin.pin.move").css({left:o.pageX-pinDownX-areaTranslateX+"px",top:o.pageY-pinDownY+8-areaTranslateY+"px"}))}),$(".waypoint-pin.clone").addClass("show"),$(".waypoint-pin.show").removeClass("clone")}})});