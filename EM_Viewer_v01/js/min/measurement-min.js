$(function(){var e=$("#map-image-area"),a=d3.select("#svg").append("svg").attr("width",e.width()).attr("height",e.height());a.append("circle").attr("cx",50).attr("cy",50).attr("r",20).attr("fill","green").attr("stroke-width",3).attr("stroke","orange");var s=null,o='<div class="horizontal line figure"></div>',r='<div class="vertical line figure"></div>',t='<div class="terminal line figure"></div>',i='<div class="straight line figure"></div>',n='<div class="angular rect figure"></div>',l='<div class="rectangle rect figure"></div>',c='<div class="circle rect figure"></div>',d='<div class="point figure"></div>',g='<div class="caption rect figure"></div>';$('#measurement__delete-all__confirm input[value="Yes"]').on("mousedown",function(){$(".figure.show").remove()});var h=$("#figure-area"),p=$(".measurement-tools");$("#controller__button").children("input").on("mousedown",function(){p.removeClass("on"),s=null,h.css("pointer-events","none")}),p.on("mousedown",function(){$(this).hasClass("on")?(s=null,h.css("pointer-events","none")):(p.removeClass("on"),s=$(this).val(),h.css("pointer-events","auto"))});var v=!1,n=!1,u=void 0,f=void 0,m=void 0,w=void 0,C=void 0,k=void 0,b=void 0,x=void 0,T=$(".straight").width(),z=void 0,_=void 0,X=void 0;$("#measurement__hide-all").on("mousedown",function(){"Hide all"===$(this).val()?$("#figure-area .figure.show").hide():$("#figure-area .figure.show").show()}),h.on({mousedown:function(e){if(null!==s)switch(u=e.pageX,f=e.pageY,z=$("#figure-area").css("transform"),_="none"===z?0:z.split(", ")[4],X="none"===z?0:z.split(", ")[5].slice(0,-1),s){case"Horizontal":v?($(".horizontal.clone").addClass("show"),$(".horizontal.show").removeClass("clone second"),v=!1):($(".horizontal.origin").clone().appendTo(h).show().addClass("clone").css("top",f-X+"px"),$(".horizontal.clone").removeClass("origin").clone().appendTo("#figure-area").show().addClass("second").css("top",f-X+"px"),v=!0);break;case"Vertical":v?($(".vertical.clone").addClass("show"),$(".vertical.show").removeClass("clone second"),v=!1):(v=!0,$(".vertical.origin").clone().appendTo(h).show().addClass("clone").css("left",u-_+"px"),$(".vertical.clone").removeClass("origin").clone().appendTo("#figure-area").show().addClass("second").css("left",u-_+"px"));break;case"Point-to-Point":v?(v=!1,$(".straight.clone").addClass("show"),$(".straight.show").removeClass("clone")):(v=!0,$(".straight.origin").clone().appendTo(h).show().addClass("clone").css({left:u-_+"px",top:f-X+"px"}),$(".straight.clone").removeClass("origin"));break;case"Angular":v?n?(v=!1,n=!1,$(".straight.clone").addClass("show"),$(".straight.show").removeClass("clone")):(n=!0,$(".straight.clone").addClass("show"),$(".straight.show").removeClass("clone"),$(".straight.origin").clone().appendTo("#figure-area").show().addClass("clone").css({left:u-_+"px",top:f-X+"px"}),$(".straight.clone").removeClass("origin")):(v=!0,$(".straight.origin").clone().appendTo("#figure-area").show().addClass("clone").css({left:u-_+"px",top:f-X+"px"}),$(".straight.clone").removeClass("origin"));break;case"Rular":v?(v=!1,$(".straight.clone").addClass("show"),$(".straight.show").removeClass("clone")):(v=!0,$(".straight.origin").clone().appendTo("#figure-area").show().addClass("clone").css({left:u-_+"px",top:f-X+"px"}),$(".straight.clone").removeClass("origin"));break;case"Rectanglar area":break;case"Circular area":break;case"Annotations":break;case"Export selected area":break;case"Rectangle":break;case"Circle":break;case"Line":v?(v=!1,$(".straight.clone").addClass("show"),$(".straight.show").removeClass("clone")):(v=!0,$(".straight.origin").clone().appendTo("#figure-area").show().addClass("clone").css({left:u-_+"px",top:f-X+"px"}),$(".straight.clone").removeClass("origin"))}}}),$(window).on({mouseup:function(){},mousemove:function(e){if(v)switch(m=e.pageX,pageY=e.pageY,w=m-u,C=pageY-f,k=Math.sqrt(Math.pow(w,2)+Math.pow(C,2)),b=Math.atan2(C,w),x=180*b/Math.PI,s){case"Horizontal":$(".horizontal.clone.second").css("top",pageY-X+"px");break;case"Vertical":$(".vertical.clone.second").css("left",m-_+"px");break;case"Point-to-Point":$(".straight.clone").css({"transform-origin":"0 0",transform:"rotate("+x+"deg) scaleX("+k+")"});break;case"Angular":n?$(".straight.clone").css({"transform-origin":"0 0",transform:"rotate("+x+"deg) scaleX("+k+")"}):$(".straight.clone").css({"transform-origin":"0 0",transform:"rotate("+x+"deg) scaleX("+k+")"});break;case"Rular":$(".straight.clone").css({"transform-origin":"0 0",transform:"rotate("+x+"deg) scaleX("+k+")"});break;case"Rectanglar area":break;case"Circular area":break;case"Annotations":break;case"Export selected area":break;case"Rectangle":break;case"Circle":break;case"Line":$(".straight.clone").css({"transform-origin":"0 0",transform:"rotate("+x+"deg) scaleX("+k+")"})}}})});